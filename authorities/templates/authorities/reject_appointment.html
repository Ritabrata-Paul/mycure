{% extends 'base.html' %}
{% load static %}
{% block title %}Reject Appointment - MyCure{% endblock %}

{% block content %}
<div class="container py-4">
    <h1 class="h2">Reject Appointment #{{ appointment.id }}</h1>
    <p class="text-muted">Provide a reason for rejecting this appointment request.</p>

    <div class="card">
        <div class="card-header bg-light">
            <h5 class="mb-0">Appointment Details</h5>
        </div>
        <div class="card-body">
            <p><strong>Patient Name:</strong> {{ appointment.user.get_full_name }}</p>
            <p><strong>Service:</strong> {{ appointment.service.name }}</p>
            <p><strong>Doctor:</strong> {% if appointment.doctor %}{{ appointment.doctor.name }}{% else %}Not Assigned{% endif %}</p>
            <p><strong>Date & Time:</strong> {{ appointment.appointment_date|date:"M d, Y" }} at {{ appointment.appointment_time }}</p>
        </div>
    </div>

    <form method="POST">
        {% csrf_token %}
        <div class="card mt-3">
            <div class="card-header bg-light">
                <h5 class="mb-0">Reason for Rejection</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="rejection_reason" class="form-label">Reason</label>
                    <textarea name="rejection_reason" id="rejection_reason" class="form-control" rows="3" required>{{ form.rejection_reason.value }}</textarea>
                </div>
            </div>
            <div class="card-footer text-end">
                <button type="submit" class="btn btn-danger">Reject Appointment</button>
            </div>
        </div>
    </form>
    <div class="text-center mt-4">
        <a href="{% url 'authority_appointments' %}" class="btn btn-primary">Back to Appointments</a>
    </div>
</div>
{% endblock %}
